//jquery.soverlay.min.sandip
(function ($) { 
        var SURFOVERLAY_TIMER = null; var isIE6 = $.browser.msie && $.browser.version == 6.0; $.fn.surfOverlay = function (val, options) { if (SURFOVERLAY_TIMER !== null) { clearTimeout(SURFOVERLAY_TIMER) } var options = $.extend({}, $.fn.surfOverlay.options, options || {}); var onSuccess = options.onSuccess || options.success; var element = this.is('*') ? this : '#' + val; var position = isIE6 ? 'absolute' : 'fixed'; var isImage = /([^\/\\]+)\.(png|gif|jpeg|jpg|bmp)$/i.test(options.url); var imgLoading = options.imgLoading ? "<img id='surfOverlayLoading' src='" + options.imgLoading + "' style='position:" + position + "; z-index:" + (options.zIndex + 9) + ";'/>" : ''; function center(id) { if (options.center) { $.center(id) } else if (isIE6) { $.center('#' + val, { 'top': $(window).scrollTop() + 'px', 'marginLeft': '', 'marginTop': '', 'left': '' }) } } $('body').prepend(imgLoading + "<div id='surfOverlay' />" + "<div id=" + val + " style='position:" + position + "; z-index:" + (options.zIndex + 5) + "; display:none;'/>"); $('#' + val).data('options', options); $('#surfOverlayLoading').load(function () { center(this) }); if (isIE6) { $('select').hide(); $('#' + val + ' select').show() } $('#surfOverlay').css({ 'backgroundColor': options.color, 'position': position, 'top': '0px', 'left': '0px', 'filter': 'alpha(opacity=' + (options.opacity * 100) + ')', 'opacity': options.opacity, '-khtml-opacity': options.opacity, '-moz-opacity': options.opacity, 'zIndex': options.zIndex, 'width': !isIE6 ? '100%' : $(window).width() + 'px', 'height': !isIE6 ? '100%' : $(document).height() + 'px' }).show(); if ($.trim(options.html)) { $(element).html(options.html) } if (this.is('*')) { $('#' + val).data('surfOverlayElementPrev', this.prev()); $('#' + val).html(this.show().data('display', options.autoHide ? 'none' : this.css('display'))); if (!isImage) { center('#' + val); $('#' + val).show(); if (!options.url && $.isFunction(onSuccess)) { onSuccess(this) } } } if (isImage) { $('<img/>').load(function () { var resize = $.resize(this.width, this.height); $(this).css({ width: resize.width, height: resize.height }); $(element).html(this); center('#' + val); center('#surfOverlayLoading'); $('#surfOverlayLoading').fadeOut(500); $('#' + val).show(); if ($.isFunction(onSuccess)) { onSuccess($(element)) } }).error(function () { alert('Image (' + options.url + ') not found.'); $.closeOverlay(val) }).attr({ 'src': options.url, 'alt': options.url }) } if (options.url && !isImage) { $.ajax({ type: options.method, data: options.data, url: options.url, success: function (responseText) { $('#surfOverlayLoading').fadeOut(500); $(element).html(responseText).show(); center('#' + val); if ($.isFunction(onSuccess)) { onSuccess(responseText) } }, error: function () { alert('URL (' + options.url + ') not found.'); $.closeOverlay(val) } }) } if (isIE6) { $(window).scroll(function () { center('#' + val) }); $(window).resize(function () { $('#surfOverlay').css({ 'width': $(window).width() + 'px', 'height': $(document).height() + 'px' }); center('#' + val) }) } if (options.closeOnEsc) { $(document).keydown(function (event) { if (event.keyCode == 27) { $.closeOverlay(val) } }) } else { $(document).unbind('keydown') } if (options.bgClickToClose) { $('#surfOverlay').click(function () { $.closeOverlay(val) }) } if (options.timeout && Number(options.timeout) > 0) { SURFOVERLAY_TIMER = window.setTimeout($.closeOverlay, Number(options.timeout)) } $('#' + val).css(options.css || {}) }; $.resize = function (imageWidth, imageHeight) { var x = $(window).width() - 150; var y = $(window).height() - 150; if (imageWidth > x) { imageHeight = imageHeight * (x / imageWidth); imageWidth = x; if (imageHeight > y) { imageWidth = imageWidth * (y / imageHeight); imageHeight = y } } else if (imageHeight > y) { imageWidth = imageWidth * (y / imageHeight); imageHeight = y; if (imageWidth > x) { imageHeight = imageHeight * (x / imageWidth); imageWidth = x } } return { 'width': imageWidth, 'height': imageHeight } }; $.center = function (element, css) { var element = $(element); var elemWidth = element.width(); element.css($.extend({}, { 'width': elemWidth + 'px', 'marginLeft': '-' + (elemWidth / 2) + 'px', 'marginTop': '-' + element.height() / 2 + 'px', 'height': 'auto', 'top': !isIE6 ? '50%' : $(window).scrollTop() + ($(window).height() / 2) + 'px', 'left': '50%' }, css || {})) }; $.fn.surfOverlay.options = { 'method': 'GET', 'data': '', 'url': '', 'color': '#000', 'opacity': '0.2', 'zIndex': 2999, 'center': true, 'imgLoading': '../images/loading_small.gif', 'bgClickToClose': false, 'success': null, 'onSuccess': null, 'timeout': 0, 'autoHide': true, 'css': {}, 'html': '', 'closeOnEsc': true }; $.fn.surfOverlay.setDefaults = function (options) { $.fn.surfOverlay.options = $.extend({}, $.fn.surfOverlay.options, options || {}) }; $.closeOverlay = function (val) { var content = $('#' + val); var options = content.data('options'); var elementPrev = content.data('surfOverlayElementPrev'); if (isIE6) { $("select").show() } if (elementPrev) { var contentChildren = content.children(); elementPrev.after(contentChildren.css('display', contentChildren.data('display'))); contentChildren.removeData('display'); content.removeData('surfOverlayElementPrev') } content.removeData('options'); $('#surfOverlayLoading, #' + val + ', #surfOverlay').remove() } })(jQuery);

function closepopup(val) {
    $.closeOverlay(val);
    return false;
}
function closedialog() {
    $.closeOverlay();
    return false;
}
